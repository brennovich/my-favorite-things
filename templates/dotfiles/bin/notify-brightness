#!/bin/bash

id="$(cat /tmp/system-brightness-notification)"

if [ "$id" == "" ]; then
  replace=""
else
  replace="-r $id"
fi

sleep 0.1
bar=$(seq -s "â”€" $(bc <<< "scale=1; $(cat /sys/class/backlight/intel_backlight/actual_brightness) / $(cat /sys/class/backlight/intel_backlight/max_brightness) * 100 / 1.95") \
  | sed 's/[0-9]//g')

dunstify \
  -t 800 \
  -a $(hostname) \
  -p \
  -u normal \
  $replace \
  "brightness" \
  $bar > /tmp/system-brightness-notification
  
